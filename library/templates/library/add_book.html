{% extends "base.html" %}
{% load static %}
{% load crispy_forms_tags %}

{% block content %}

{% if user.is_authenticated %}

<div class="container add-books">
    <h3 class="my-3">Add Books to your Library</h3>
    <a href="#" data-url="{% url 'add_book' %}" class="btn-isbn {% if active == 'isbn' %}selected{% endif %}">ISBN</a>
    <a href="#" data-url="{% url 'add_book_manual' %}"
        class="ms-2 btn-manual {% if active == 'manual' %}selected{% endif %}">Manually</a>

    <!-- Add book form ISBN -->
    <div class="row isbn mt-2">
        <div class="col-md-4 mt-3">

            {% if active == 'isbn' %}
            <h4>Add Book by ISBN</h4>
            {% else %}
            <h4>Add Book details manually</h4>
            {% endif %}

            <form method="post">
                {% csrf_token %}
                {{ add_form | crispy }}
                {{ add_form_manual | crispy }}
                <button type="submit" class="btn btn-confirm">Add Book</button>
            </form>
        </div>
    </div>
</div>

{% else %}

<div class="container">
    <div class="row">
        <div class="col-md-8 mt-5 offset-md-2">
            <h2>Login Required</h2>
            <p class="lead">To add books to your library please first <a href="{% url 'account_login' %}">Login</a>
            </p>
        </div>
    </div>
</div>

{% endif %}

{% endblock %}

{% block extras %}
<!-- jQuery CDN link -->
<script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
    defer crossorigin="anonymous"></script>

<!-- Custom JS -->
<script src="{% static 'js/add.js' %}" defer></script>
{% endblock %}