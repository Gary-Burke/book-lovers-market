{% extends "base.html" %}
{% load static %}
{% load crispy_forms_tags %}

{% block content %}

{% if user.is_authenticated and book.user == user %}

<div class="container">
    <div class="row mt-3">
        <h3>Edit Book Details</h3>
        <div class="col-12 col-md-8 col-lg-7 col-xxl-5 mb-md-5">
            <form method="post">
                {% csrf_token %}
                {{ edit_book_form | crispy }}
                <a class="btn button-cancel" href="{% url 'library' %}">Cancel</a>
                <button type="submit" class="btn btn-confirm ms-1">Update Details</button>
            </form>
        </div>

        <div class="col-12 col-md-4 col-lg-3 my-4 edit-preview text-center">
            {% if book.cover_url %}
            <img src="{{ book.cover_url }}" alt="{{ book.title }}">
            {% else %}
            <img src="{% static 'images/no-cover.png' %}" alt="No cover">
            {% endif %}
        </div>
    </div>
</div>

{% elif user.is_authenticated %}

<div class="container">
    <div class="row">
        <div class="col-md-8 mt-5 offset-md-2">
            <h2>Not Allowed!</h2>
            <p class="lead">You can only edit the books in your own <a href="{% url 'library' %}">Library</a>
            </p>
        </div>
    </div>
</div>

{% else %}

<div class="container">
    <div class="row">
        <div class="col-md-8 mt-5 offset-md-2">
            <h2>Login Required</h2>
            <p class="lead">To edit your books you need to first <a href="{% url 'account_login' %}">Login</a>
            </p>
        </div>
    </div>
</div>

{% endif %}

{% endblock %}